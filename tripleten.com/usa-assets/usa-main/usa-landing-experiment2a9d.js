(function(){var E,L,G,P,U;"use strict";const p=new URLSearchParams(window.location.search.toLowerCase()),S=((E=window._experimentConfig)==null?void 0:E.enabled)||!1,u=(L=window._experimentConfig)==null?void 0:L.name,T=7*24*60*60*1e3,w=(G=window._experimentConfig)==null?void 0:G.expLandingPathname,f=(P=window._experimentConfig)==null?void 0:P.expLandingHref,k=((U=window._experimentConfig)==null?void 0:U.utmConditions)||{},R=window._experimentConfigs||[],g=n=>Object.keys(n).reduce((o,e)=>{var i,s;const r=((i=n[e].include)==null?void 0:i.every(c=>{var t;return(t=p.get(e))==null?void 0:t.includes(c.toLowerCase())}))??!0,a=((s=n[e].exclude)==null?void 0:s.every(c=>{var t;return!((t=p.get(e))!=null&&t.includes(c.toLowerCase()))}))??!0;return!!(o&&r&&a)},!0),l=(n,o,e=1)=>{const r=o.reduce((s,c,t)=>(s.push(c+(s[t-1]??0)),s),[]),a=r[r.length-1],i=[];for(let s=0;s<e;s++){const c=Math.random()*a,t=r.findIndex(d=>c<d);i.push(n[t])}return e===1?i[0]:i},h=(n,o)=>{const e=new Date;e.setTime(e.getTime()+T),document.cookie=`experiment.${n}=${o}; expires=${e.toUTCString()}; path=/`},x=n=>{var o,e;return(e=(o=document.cookie.split(";").map(r=>r.trim()).find(r=>r.startsWith(`experiment.${n}`)))==null?void 0:o.split("="))==null?void 0:e[1]},$=n=>{const o=x(n);if(o)return o;const e=l(["DEFAULT","EXPERIMENT"],[.5,.5]);return h(n,e),e},A=(n,o)=>{const e=1-o.map(t=>t.weight).reduce((t,d)=>t+d,0),r={name:"DEFAULT",origin:window.location.origin,pathname:window.location.pathname,weight:e},a=[...o,r],i=a.map(t=>t.weight),s=x(n);if(s)return a.find(t=>t.name===s)||r;const c=l(a,i);return h(n,c.name),c},C=n=>sessionStorage.getItem(`experiment.${n}.performed`)==="true",m=n=>{sessionStorage.setItem(`experiment.${n}.performed`,"true")},_=()=>{if(!S||!g(k)||!u)return;if($(u)==="EXPERIMENT"){m(u);const e=new URL(window.location.href);if(f){const r=new URL(f);e.searchParams.forEach((a,i)=>{r.searchParams.set(i,a)}),window.location.assign(r.toString());return}if(w){e.pathname=w,window.location.assign(e.toString());return}}C(u)||(m(u),window.location.reload())},D=()=>{R.forEach(({enabled:n,expGroups:o,name:e,utmConditions:r})=>{if(!n||!g(r))return;const i=A(e,o);if(C(e))return;if(m(e),i.name==="DEFAULT"){window.location.reload();return}const s=new URL(window.location.href),c=new URL(`${i.origin}${i.pathname}`);s.searchParams.forEach((t,d)=>{c.searchParams.set(d,t)}),window.location.assign(c.toString())})};_(),D()})();
